(function(e){function t(t){for(var l,a,s=t[0],r=t[1],c=t[2],p=0,m=[];p<s.length;p++)a=s[p],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&m.push(o[a][0]),o[a]=0;for(l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],l=!0,s=1;s<n.length;s++){var r=n[s];0!==o[r]&&(l=!1)}l&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var l={},o={app:0},i=[];function a(t){if(l[t])return l[t].exports;var n=l[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=l,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)a.d(n,l,function(t){return e[t]}.bind(null,l));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],r=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=r;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"438d":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var l=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex flex-row",attrs:{id:"app"}},[n("Toolbox"),n("ComContainer",{attrs:{config:e.config}}),n("div",[n("div",{staticStyle:{"white-space":"pre",height:"50vh",overflow:"scroll"}},[e._v(e._s(e._f("pretty")(e.config)))]),n("div",{staticStyle:{"white-space":"pre",height:"50vh",overflow:"scroll"}},[n("PropPanel")],1)])],1)},i=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("draggable",{class:e.customClass,style:"flex:"+e.config.flex,attrs:{tag:"fieldset"===e.config.style?"fieldset":"div",group:"people",disabled:e.config.check},on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1}},nativeOn:{click:function(t){return t.stopPropagation(),e.setFocus(e.config.id)}},model:{value:e.config.elements,callback:function(t){e.$set(e.config,"elements",t)},expression:"config.elements"}},[e._l(e.config.elements,(function(t){return["Container"===t.component?n("ComContainer",{key:t.id,attrs:{config:t}}):"Static"===t.component?n("ComStatic",{key:t.id,attrs:{config:t}}):"Table"===t.component?n("ComTable",{key:t.id,attrs:{config:t}}):n("div",{key:t.id},[e._v(e._s(t.content))])]}))],2)},s=[],r=(n("d81d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return"html"===e.config.style?n("div",{style:"text-align:"+e.config.align,domProps:{innerHTML:e._s(e.config.content)},on:{click:function(t){return t.stopPropagation(),e.setFocus(t)}}}):"image"===e.config.style?n("img",{style:"text-align:"+e.config.align,attrs:{src:e.config.src},on:{click:function(t){return t.stopPropagation(),e.setFocus(t)}}}):n("div",{style:"text-align:"+e.config.align,on:{click:function(t){return t.stopPropagation(),e.setFocus(t)}}},[e._v(e._s(e.config.content))])}),c=[],u={props:{config:Object},methods:{setFocus:function(){this.$store.commit("updateSelectComponentID",this.config.id)}}},p=u,m=(n("c0ac"),n("2877")),f=Object(m["a"])(p,r,c,!1,null,null,null),d=f.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{on:{click:function(t){return t.stopPropagation(),e.setFocus(t)}}},[e.fields.length>0?n("table",{staticClass:"table table-striped table-sm"},[n("thead",[n("tr",e._l(e.fields,(function(t){return n("td",{key:t.key},[e._v(e._s(t.title))])})),0)]),n("tbody",e._l(e.data,(function(t,l){return n("tr",{key:"d-"+l},e._l(e.fields,(function(l,o){return n("td",{key:"f-"+o},[e._v(" "+e._s(t[l.key])+" ")])})),0)})),0)]):n("div",[e._v("empty table")])])},v=[],g=(n("d3b7"),{props:{config:Object},data:function(){return{data:[],fields:[]}},methods:{setFocus:function(){this.$store.commit("updateSelectComponentID",this.config.id)},refresh:function(){console.log("rerer")}},computed:{tableSrc:function(){return this.config.src}},watch:{tableSrc:{handler:function(){var e=this;this.fields=[],this.data=[],fetch(this.tableSrc).then((function(e){return e.json()})).then((function(t){e.fields=t.fields,e.data=t.data}))},immediate:!0}}}),h=g,b=Object(m["a"])(h,y,v,!1,null,null,null),x=b.exports,_=n("b76a"),k=n.n(_),C={name:"ComContainer",components:{ComStatic:d,ComTable:x,draggable:k.a},props:{config:Object},methods:{setFocus:function(){this.$store.commit("updateSelectComponentID",this.config.id)}},computed:{customClass:function(){var e={m2:!0,edit:!0,"d-flex":"flexrow"===this.config.align||"flexcol"===this.config.align,"flex-row":"flexrow"===this.config.align,"flex-column":"flexcol"===this.config.align};return void 0!==this.config.class&&this.config.class.map((function(t){e[t]=!0})),e}}},S=C,w=(n("f7dc"),Object(m["a"])(S,a,s,!1,null,null,null)),O=w.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("draggable",{attrs:{list:e.components,group:{name:"people",pull:"clone",put:!1},clone:e.addDefault}},e._l(e.components,(function(t){return n("div",{key:t.component},[e._v(" "+e._s(t.component)+" ")])})),0)],1)},j=[],D=(n("4de4"),n("4160"),n("b0c0"),n("b64b"),n("159b"),{name:"Toolbox",components:{draggable:k.a},data:function(){return{list:[],components:[]}},mounted:function(){var e=this;this.list=this.$store.state.toolbox.list;var t={};this.list[".Prototype"].options.forEach((function(e){"bool"===e.type?t[e.name]=!1:"number"===e.type?t[e.name]=0:"table"===e.type||"checklist"===e.type?t[e.name]=[]:"list"===e.type?t[e.name]=e.value.filter((function(e){return e.default}))[0].value||"":t[e.name]=""})),Object.keys(this.list).forEach((function(n){if(".Prototype"!==n){var l=e.list[n],o=JSON.parse(JSON.stringify(t));o.component=n,l.options.forEach((function(e){"bool"===e.type?o[e.name]=!1:"number"===e.type?o[e.name]=0:"table"===e.type||"checklist"===e.type?o[e.name]=[]:"list"===e.type?o[e.name]=e.value.filter((function(e){return e.default}))[0].value||"":"text"===e.type?o[e.name]="預設文字":o[e.name]=""})),l.component=n,l.default=o,e.components.push(l)}}))},methods:{addDefault:function(e){var t=JSON.parse(JSON.stringify(e.default));return t.id=t.component+"_"+(new Date).getTime(),"Container"===t.component&&(t.elements=[]),t}}}),$=D,T=Object(m["a"])($,P,j,!1,null,null,null),I=T.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("table",{staticClass:"table table-sm table-bordered"},e._l(e.proto.options.concat(e.template.options)||[],(function(t){return n("tr",{key:t.name},[void 0===t.cond||void 0!==t.cond&&t.cond.style.indexOf(e.prop.style)>-1?[n("td",[n("label",{staticClass:"mr-1"},[e._v(e._s(t.title)+":")])]),n("td",["list"===t.type?n("select",{directives:[{name:"model",rawName:"v-model",value:e.prop[t.name],expression:"prop[option.name]"}],on:{change:function(n){var l=Array.prototype.filter.call(n.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.prop,t.name,n.target.multiple?l:l[0])}}},e._l(t.value,(function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v(e._s(t.title))])})),0):e._e(),"text"===t.type||"href"===t.type?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.prop[t.name],expression:"prop[option.name]"}],attrs:{rows:"1"},domProps:{value:e.prop[t.name]},on:{input:function(n){n.target.composing||e.$set(e.prop,t.name,n.target.value)}}}):e._e()])]:e._e()],2)})),0)])},F=[],N={name:"PropPanel",data:function(){return{prop:{}}},computed:{selectedID:function(){return this.$store.state.selectedID},toolbox:function(){return this.$store.state.toolbox.list},template:function(){return Object.keys(this.prop).length>0?this.toolbox[this.prop.component]:{}},proto:function(){return this.toolbox[".Prototype"]}},watch:{selectedID:function(){var e=this.$store.state.config;function t(e,n){if(console.log(e,n),e.id===n){var l=JSON.parse(JSON.stringify(e));return delete l.elements,l}if(void 0!==e.elements&&e.elements.length>0)for(var o=0;o<e.elements.length;o++){var i=t(e.elements[o],n);if(console.log(i),void 0!==i)return i}}this.prop=t(e,this.selectedID)},prop:{handler:function(e){this.$store.commit("updateComponentByID",e)},deep:!0}}},J=N,M=(n("5cab"),Object(m["a"])(J,E,F,!1,null,"3b544a4e",null)),L=M.exports,A={name:"App",components:{ComContainer:O,Toolbox:I,PropPanel:L},filters:{pretty:function(e){return JSON.stringify(e,null,2)}},computed:{config:function(){return this.$store.state.config},selectedID:function(){return this.$store.state.selectedID}}},B=A,H=Object(m["a"])(B,o,i,!1,null,null,null),z=H.exports,R=n("2f62");l["a"].use(R["a"]);var q=new R["a"].Store({state:{selectedID:"",toolbox:{list:{".Prototype":{options:[{name:"id",title:"識別名稱",type:"text"},{name:"class",title:"css類別",type:"checklist",value:"#CLASS_LIST"},{name:"flex",title:"可伸縮",type:"text"}]},Button:{attr:{desc:"按鈕"},events:{click:{desc:"按下按鈕"}},options:[{name:"title",title:"標題",type:"text"},{name:"disabled",title:"禁用",type:"bool"}]},CheckList:{attr:{desc:"複選清單"},options:[{name:"style",title:"樣式",type:"list",value:[{default:!0,title:"核取方塊",value:"checkbox"},{title:"開關按鈕",value:"button"}]},{name:"title",title:"標題",type:"text"},{name:"default",title:"預設值",type:"text"},{name:"items",title:"項目",type:"table",value:[{name:"title",title:"項目標題"},{name:"value",title:"項目值"}]},{name:"type",title:"資料形式",type:"list",value:[{default:!0,title:"文字清單",value:"normal"},{title:"位元遮罩",value:"bitmask"}]},{name:"multiline",title:"項目分行",type:"bool"}]},Container:{attr:{container:!0,desc:"元件容器"},options:[{name:"style",title:"樣式",type:"list",value:[{default:!0,title:"一般",value:"normal"},{title:"群組",value:"fieldset"}]},{name:"align",title:"內容排列",type:"list",value:[{default:!0,title:"一般",value:"block"},{title:"單列",value:"inline"},{title:"伸縮欄",value:"flexcol"},{title:"伸縮列",value:"flexrow"}]},{cond:{style:"fieldset"},name:"check",title:"禁用開關",type:"bool"},{cond:{style:"fieldset"},name:"legend",title:"標題",type:"text"}]},Date:{attr:{desc:"日期選擇"},options:[{name:"style",title:"樣式",type:"list",value:[{default:!0,title:"單一日期",value:"date"},{title:"日期範圍",value:"range"}]},{name:"format",title:"資料格式",type:"text"},{name:"disabled",title:"禁用",type:"bool"}]},DropDown:{attr:{desc:"下拉式選單"},events:{change:{desc:"選擇項目變更"}},options:[{name:"style",title:"樣式",type:"list",value:[{default:!0,title:"一般",value:"select"},{title:"選單",value:"menu"}]},{name:"title",title:"標題",type:"text"},{cond:{style:"select"},name:"items",title:"項目定義",type:"table",value:[{name:"title",title:"項目標題"},{name:"value",title:"項目值"},{name:"group",optional:!0,title:"群組"}]},{name:"default",title:"預設值",type:"text"},{name:"src",title:"動態定義",type:"href"},{name:"disabled",title:"禁用",type:"bool"}]},Input:{attr:{desc:"輸入"},events:{change:{desc:"內容變更"}},options:[{name:"style",title:"樣式",type:"list",value:[{default:!0,title:"一般文字",value:"text"},{title:"數字",value:"number"},{title:"滑桿",value:"range"}]},{name:"title",title:"標題",type:"text"},{name:"default",title:"預設值",type:"text"},{name:"disabled",title:"禁用",type:"text"},{cond:{style:["number","range"]},name:"min",title:"最小值",type:"number"},{cond:{style:["number","range"]},name:"max",title:"最大值",type:"number"},{cond:{style:["number","range"]},name:"step",title:"最小單位",type:"number"},{cond:{style:"text"},name:"size",title:"大小(字元數)",type:"number"},{cond:{style:"text"},name:"maxlength",title:"可輸入字數",type:"number"},{cond:{style:"text"},name:"pattern",title:"格式規範",type:"text"},{cond:{style:"text"},name:"placeholder",title:"提示文字",type:"text"},{cond:{style:["text","number"]},name:"align",title:"對齊",type:"list",value:[{default:!0,title:"左",value:"left"},{title:"中",value:"center"},{title:"右",value:"right"}]},{cond:{style:"text"},name:"transform",title:"文字轉換",type:"list",value:[{default:!0,title:"無",value:"none"},{title:"小寫",value:"lowercase"},{title:"大寫",value:"uppercase"}]},{name:"readonly",title:"唯讀",type:"bool"}]},MultiForm:{attr:{desc:"多重表單"},events:{hide:{desc:"隱藏表單",param:"name"},show:{desc:"顯示表單",param:"name"}},options:[{name:"style",title:"樣式",type:"list",value:[{default:!0,title:"頁籤列",value:"tab"},{title:"下拉選單",value:"select"},{title:"無線電鈕",value:"radio"},{title:"區段",value:"section"}]},{name:"items",title:"項目定義",type:"table",value:[{name:"name",title:"項目名稱"},{name:"title",title:"項目標題"},{list:"#FORM_LIST",name:"form",title:"表單"}]}]},Static:{attr:{desc:"靜態文字"},options:[{name:"style",title:"樣式",type:"list",value:[{default:!0,title:"純文字",value:"text"},{title:"HTML",value:"html"},{title:"圖片",value:"image"}]},{cond:{style:["text","html"]},name:"content",title:"內容",type:"text"},{name:"align",title:"對齊",type:"list",value:[{default:!0,title:"左",value:"left"},{title:"中",value:"center"},{title:"右",value:"right"}]},{cond:{style:"image"},name:"src",title:"資料來源",type:"href"}]},Table:{attr:{desc:"表格"},options:[{name:"columns",title:"欄位定義",type:"table",value:[{name:"title",title:"欄位標題"},{name:"key",title:"欄位鍵值"}]},{name:"title",title:"標題",type:"text"},{name:"src",title:"資料來源",type:"href"},{name:"page",title:"每頁顯示筆數",type:"number"}]},TextArea:{attr:{desc:"多行文字輸入"},events:{change:{desc:"內容變更"}},options:[{name:"title",title:"標題",type:"text"},{name:"rows",title:"列數",type:"number"},{name:"cols",title:"行數",type:"number"},{name:"disabled",title:"禁用",type:"bool"},{name:"readonly",title:"唯讀",type:"bool"}]}}},config:{id:"main",flex:1,component:"Container",style:"normal",align:"flexcol",check:!1,legend:"標題",elements:[{id:"header",class:["navbar","navbar-light","bg-dark","text-white"],component:"Container",style:"normal",align:"inline",check:!1,legend:"header",elements:[{id:"headerText",component:"Static",style:"html",content:"<h1>NCDP Designer</h1>"}]},{id:"Container_1615699738097",class:[],flex:"",component:"Container",style:"normal",align:"flexrow",check:!1,legend:"預設文字",elements:[{id:"Container_1615699741030",class:[],flex:"2",component:"Container",style:"normal",align:"block",check:!1,legend:"預設文字",elements:[{id:"Static_1615699770404",class:[],flex:"",component:"Static",style:"text",content:"系統連結",align:"left",src:""},{id:"Static_1615699785428",class:[],flex:"",component:"Static",style:"html",content:'<a href="">system1</a>',align:"left",src:""}]},{id:"Container_1615699758833",class:[],flex:"10",component:"Container",style:"normal",align:"block",check:!1,legend:"預設文字",elements:[{id:"Table_1615699811195",class:[],flex:"",component:"Table",columns:[],title:"預設文字",src:"./table.json",page:0}]}]}]}},mutations:{updateSelectComponentID:function(e,t){e.selectedID=t},updateComponentByID:function(e,t){function n(e,t){if(e.id===t.id)Object.keys(t).forEach((function(n){e[n]=t[n]}));else if(void 0!==e.elements&&e.elements.length>0)for(var l=0;l<e.elements.length;l++)n(e.elements[l],t)}console.log(e),console.log(t),void 0!==t.id&&n(e.config,t)}},actions:{},modules:{}});l["a"].config.productionTip=!1,new l["a"]({store:q,render:function(e){return e(z)}}).$mount("#app")},"5cab":function(e,t,n){"use strict";n("438d")},"82d6":function(e,t,n){},a151:function(e,t,n){},c0ac:function(e,t,n){"use strict";n("a151")},f7dc:function(e,t,n){"use strict";n("82d6")}});
//# sourceMappingURL=app.6e724de9.js.map